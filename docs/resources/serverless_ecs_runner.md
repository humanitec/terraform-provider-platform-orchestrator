---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "platform-orchestrator_serverless_ecs_runner Resource - platform-orchestrator"
subcategory: ""
description: |-
  AWS ECS Task Runner resource
---

# platform-orchestrator_serverless_ecs_runner (Resource)

AWS ECS Task Runner resource

## Example Usage

```terraform
resource "platform-orchestrator_serverless_ecs_runner" "example" {
  id          = "my-ecs-runner"
  description = "This is a sample ECS runner configuration."

  runner_configuration = {
    auth = {
      role_arn = "arn:aws:iam::123456789012:role/humanitec_role"
    }
    job = {
      region             = "eu-central-1"
      cluster            = "my-ecs-cluster-name"
      execution_role_arn = "arn:aws:iam::123456789012:role/execution_role"
      subnets            = ["my-subnet-1"]

      task_role_arn        = "arn:aws:iam::123456789012:role/task_role"
      is_public_ip_enabled = false
      security_groups      = []

      environment = {
        "EXAMPLE_ENVIRONMENT_VARIABLE" = "value"
      }

      secrets = {
        "SECRET_ENVIRONMENT_VARIABLE"   = "arn:aws:secretsmanager:eu-central-1:123456789012:secret:myapp/api-key-XyZ9Qw"
        "PROPERTY_ENVIRONMENT_VARIABLE" = "arn:aws:ssm:eu-central-1:123456789012:parameter/app/config/api-endpoint"
      }
    }
  }

  state_storage_configuration = {
    type = "s3"
    s3_configuration = {
      bucket      = "humanitec-ecs-runner-state"
      path_prefix = "state-files"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `id` (String) The unique identifier for the Runner.
- `runner_configuration` (Attributes) The configuration of the AWS ECS Runner. (see [below for nested schema](#nestedatt--runner_configuration))
- `state_storage_configuration` (Attributes) The state storage configuration for the Runner. (see [below for nested schema](#nestedatt--state_storage_configuration))

### Optional

- `description` (String) The description of the Runner.

<a id="nestedatt--runner_configuration"></a>
### Nested Schema for `runner_configuration`

Required:

- `auth` (Attributes) Configuration to obtain temporary AWS security credentials by assuming an IAM role. (see [below for nested schema](#nestedatt--runner_configuration--auth))
- `job` (Attributes) The job configuration for the AWS ECS Runner. (see [below for nested schema](#nestedatt--runner_configuration--job))

<a id="nestedatt--runner_configuration--auth"></a>
### Nested Schema for `runner_configuration.auth`

Required:

- `role_arn` (String) The ARN of the role to assume.

Optional:

- `session_name` (String) Session name to be used when assuming the role. If not provided, a default session name will be "{org_id}-{runner_id}".
- `sts_region` (String) The AWS region identifier for the Security Token Service (STS) endpoint. If not provided, the cluster region will be used.


<a id="nestedatt--runner_configuration--job"></a>
### Nested Schema for `runner_configuration.job`

Required:

- `cluster` (String) The ECS Cluster name.
- `execution_role_arn` (String) The ARN of the IAM role to use for launching the ECS Task.
- `region` (String) The AWS Region.
- `subnets` (List of String) The list of subnets to use for the Runner. At least one subnet must be provided.

Optional:

- `environment` (Map of String) The plain-text environment variables to set for the ECS Task.
- `image` (String) The container image to use for the ECS Task. If not provided, a default canyon-runner image will be used.
- `is_public_ip_enabled` (Boolean) Whether to provision a public IP for the ECS Task.
- `secrets` (Map of String) The secrets to set for the Runner. The values must be Secrets Manager ARNs or Parameter Store ARNs.
- `security_groups` (List of String) The list of subnets to use for the Runner.
- `task_role_arn` (String) The ARN of the IAM role to use for running the ECS Task.



<a id="nestedatt--state_storage_configuration"></a>
### Nested Schema for `state_storage_configuration`

Required:

- `type` (String) The type of state storage configuration for the Runner.

Optional:

- `kubernetes_configuration` (Attributes) The Kubernetes state storage configuration for the Runner. (see [below for nested schema](#nestedatt--state_storage_configuration--kubernetes_configuration))
- `s3_configuration` (Attributes) The S3 state storage configuration for the Runner (see [below for nested schema](#nestedatt--state_storage_configuration--s3_configuration))

<a id="nestedatt--state_storage_configuration--kubernetes_configuration"></a>
### Nested Schema for `state_storage_configuration.kubernetes_configuration`

Required:

- `namespace` (String) The namespace for the Kubernetes state storage configuration.


<a id="nestedatt--state_storage_configuration--s3_configuration"></a>
### Nested Schema for `state_storage_configuration.s3_configuration`

Required:

- `bucket` (String) Name of the S3 Bucket

Optional:

- `path_prefix` (String) A prefix path for the state file. The environment uuid will be used as a unique key within this

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import platform-orchestrator_serverless_ecs_runner.example "my-ecs-runner"
```
